https://juejin.cn/post/6932015291358511118

- 当我们获得对象的时候，每次获得的都是同一个
- 那么我们可以先创建好一个实例，然后写一个get方法，每次创建的时候，通过get方法获取该实例，那么就达到了单例效果，



下面是用JavaScript实现单例模式的几种不同方式，涵盖了懒汉式、饿汉式、双重检查锁定和模块模式。

### 1. 懒汉式（Lazy Initialization）

懒汉式单例模式在第一次访问时创建实例。此实现并不默认线程安全，但可以使用`synchronized`机制确保线程安全。

```javascript
class Singleton {
  constructor() {
    if (Singleton.instance) {
      return Singleton.instance;
    }
    this.value = Math.random();
    Singleton.instance = this;
  }
  
  getValue() {
    return this.value;
  }
}

// 使用示例
const instance1 = new Singleton();
const instance2 = new Singleton();

console.log(instance1 === instance2); // true
console.log(instance1.getValue()); // 实例的值
```

### 2. 饿汉式（Eager Initialization）

饿汉式单例模式在类加载时就创建实例，确保实例在任何情况下都已存在。

```javascript
class Singleton {
  constructor() {
    this.value = Math.random();
  }
  
  static getInstance() {
    return Singleton.instance;
  }
}

// 创建唯一实例
Singleton.instance = new Singleton();

// 使用示例
const instance1 = Singleton.getInstance();
const instance2 = Singleton.getInstance();

console.log(instance1 === instance2); // true
console.log(instance1.value); // 实例的值
```

### 3. 双重检查锁定（Double-Checked Locking）

双重检查锁定是一种懒汉式单例模式实现方式，用于确保线程安全。

```javascript
class Singleton {
  constructor() {
    if (Singleton.instance) {
      return Singleton.instance;
    }
    this.value = Math.random();
    Singleton.instance = this;
  }

  static getInstance() {
    if (!Singleton.instance) {
      Singleton.instance = new Singleton();
    }
    return Singleton.instance;
  }
}

// 使用示例
const instance1 = Singleton.getInstance();
const instance2 = Singleton.getInstance();

console.log(instance1 === instance2); // true
console.log(instance1.value); // 实例的值
```

### 4. 模块模式（Module Pattern）

JavaScript的模块模式（尤其是ES6的模块）也可以实现单例模式。这里是一个使用自执行函数的例子：

```javascript
const Singleton = (function () {
  let instance;
  
  function createInstance() {
    return {
      value: Math.random(),
      getValue() {
        return this.value;
      }
    };
  }
  
  return {
    getInstance() {
      if (!instance) {
        instance = createInstance();
      }
      return instance;
    }
  };
})();

// 使用示例
const instance1 = Singleton.getInstance();
const instance2 = Singleton.getInstance();

console.log(instance1 === instance2); // true
console.log(instance1.getValue()); // 实例的值
```

### 总结

这些实现展示了如何在JavaScript中实现单例模式。具体选择哪种方式取决于需求，例如是否需要线程安全，是否需要懒加载等。如果你有其他问题或需要更多示例，随时告诉我！