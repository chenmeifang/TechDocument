https://www.bilibili.com/video/BV1wy4y1D7JT?p=43

# 41 生命周期(旧)——父组件render流程

<img src="05.assets/企业微信截图_16307380143814.png" alt="img" style="zoom:80%;" />

<img src="05.assets/image-20210904144728469.png" alt="image-20210904144728469" style="zoom: 80%;" />

父组件一旦重新render，子组件就会响应**componentWillReceiveProps**钩子

# 42 总结生命周期（旧）

# 43 对比新旧生命周期

https://www.bilibili.com/video/BV1wy4y1D7JT/?p=43&vd_source=a7089a0e007e4167b4a61ef53acc6f7e

<img src="05 41——50节.assets/image-20240308001018832.png" alt="image-20240308001018832" style="zoom: 67%;" />

在新版react中使用旧版react中的生命周期钩子：

<img src="05.assets/image-20210904150811465.png" alt="image-20210904150811465" style="zoom:80%;" />

* componentWillMount -->UNSAFE_componentWillMount

* componentWillReceiveProps -->UNSAFE_componentWillReceiveProps 

* componentWillUpdate-->UNSAFE_componentWillUpdate


<img src="05.assets/image-20210904151255259.png" alt="image-20210904151255259" style="zoom:80%;" />

**为什么要加UNSAFE？**

<img src="05 41——50节.assets/image-20240308121923001.png" alt="image-20240308121923001" style="zoom:80%;" />

# 44 getDerivedStateFromProps

https://www.bilibili.com/video/BV1wy4y1D7JT/?p=44&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e

<img src="05 41——50节.assets/企业微信截图_1709871958620.png" alt="img" style="zoom: 67%;" />

![image-20240308123758449](05 41——50节.assets/image-20240308123758449.png)

设计getDerivedStateFromProps有什么用？

<img src="05 41——50节.assets/image-20240308123918225.png" alt="image-20240308123918225" style="zoom:80%;" />

# 45 getSnapshotBeforeUpdate

https://www.bilibili.com/video/BV1wy4y1D7JT/?p=45&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e

在更新之前获取快照

<img src="05 41——50节.assets/企业微信截图_1709871958620.png" alt="img" style="zoom: 67%;" />

- 在更新之前获取谁的快照？
- 这个快照获取完了之后有什么用呢？



![image-20240308125038755](05 41——50节.assets/image-20240308125038755.png)



![image-20240308125115949](05 41——50节.assets/image-20240308125115949.png)

- 这个返回的快照值交给谁了？ 

  ![image-20240308125234037](05 41——50节.assets/image-20240308125234037.png)

  ![image-20240308125313717](05 41——50节.assets/image-20240308125313717.png)

# 46 getSnapshotBeforeUpdate举例



# 47 总结生命周期（新）

# 48 DOM的diffing算法

![image-20210904163201152](05.assets/image-20210904163201152.png)

![image-20210904164748452](05.assets/image-20210904164748452.png)

![img](05.assets/企业微信截图_16307439282451.png)

![image-20210904162735113](05.assets/image-20210904162735113.png)

**上面add有一个非常严重的效率问题**

# 49 初始化react脚手架

<img src="05.assets/image-20210904170617193.png" alt="image-20210904170617193" style="zoom: 67%;" />

脚手架是用什么搭的？——webpack

# 50 脚手架文件介绍_public

  public里面一般存静态文件：页面 样式 图片

![image-20210904173351393](05.assets/image-20210904173351393.png)





















































































































