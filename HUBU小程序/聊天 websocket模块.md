https://www.bilibili.com/video/BV1yi4y1t7yD?from=search&seid=4783580291640157481

## 一：传统的http能不能实现聊天的效果？

## 二： 什么是websocket？

![截屏2020-12-13 下午3.30.05](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2020-12-13 下午3.30.05.png)

为什么在http请求下， 服务器无法给浏览器主动发送数据？

![截屏2020-12-13 下午3.49.10](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2020-12-13 下午3.49.10.png)

### websocket允许服务器给浏览器发送消息。

http协议三次握手！

每次请求响应都有一次三次握手！很耗费时间和性能

 # 2 在h5中，如何使用websocket

websocket维基百科：https://zh.wikipedia.org/wiki/WebSocket

编写websocket客户端应用：https://developer.mozilla.org/zh-CN/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications

编写websocket服务端应用：https://developer.mozilla.org/zh-CN/docs/Web/API/WebSockets_API/Writing_WebSocket_servers

https://developer.mozilla.org/zh-cn/docs/Web/API/WebSocket

![截屏2021-02-02 下午1.42.23](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2021-02-02 下午1.42.23.png)



![截屏2021-02-02 下午1.48.29](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2021-02-02 下午1.48.29.png)

![截屏2021-02-02 下午1.52.28](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2021-02-02 下午1.52.28.png)

# 3 nodejs开发自己的websocket服务

第三方包：https://github.com/sitegui/nodejs-websocket#readme

![截屏2021-02-02 下午2.04.25](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2021-02-02 下午2.04.25.png)

![截屏2021-02-02 下午2.08.24](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2021-02-02 下午2.08.24.png)

 ![截屏2021-02-02 下午2.11.00](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2021-02-02 下午2.11.00.png)

![截屏2021-02-02 下午2.17.57](/Users/chenmeifang/Library/Application Support/typora-user-images/截屏2021-02-02 下午2.17.57.png)



