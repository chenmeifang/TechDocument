### 用户表：

1. 用户id
2. 微信openid
3. 昵称
4. 头像url
5. 手机号码 



用手机号码还是微信的openid做用户的唯一标识？

主要是商品分享那里的逻辑！！！

第一：A分享商品给B，B打开不能直接进商品页，不然会有问题

B打开分享链接，点击立即购买：

​	（1）有小程序请求获取地理位置信息

​	（2）有小程序请求手机号码信息 ----> 确认订单，填写收货地址页面--->后续怎么这么顺利！！！







自己的打算做成这样：

B打开分享链接，点击立即购买：

​	点击购买的时候发现没有登录，就给跳转到登录页面。

​	判断没有登录的依据是什么？



**点击分享链接会跳到空白页（在空白页也是判断token，token是根据openid生成的，openid存在服务器，token存在前端。这个token先暂时一致不换，有token就缓存，判断缓存有没有token，有就是说明是老用户，就不用登录了，直接跳首页，我们之前的小程序判断是不是老用户，每次都要去请求一次接口，很麻烦不妥），分享链接会带有参数，对那个参数做判断，然后跳登录页进行登录（），登录完了之后跳商品详情页**



### 手机号码在哪些地方申请授权获取？

​	商品详情页的所有按钮 都必须授权手机号码才能生效。

还有省心卖的入口文件