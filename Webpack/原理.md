# 65 loader介绍

https://www.bilibili.com/video/BV14T4y1z7sw/?p=65&spm_id_from=333.880.my_history.page.click&vd_source=a7089a0e007e4167b4a61ef53acc6f7e

<img src="原理.assets/image-20240330155914351.png" alt="image-20240330155914351" style="zoom: 80%;" />                                                       <img src="原理.assets/image-20240330160216585.png" alt="image-20240330160216585" style="zoom: 67%;" />

# 66 第一个loader

https://www.bilibili.com/video/BV14T4y1z7sw/?p=66&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e

 <img src="原理.assets/image-20240330164002353.png" alt="image-20240330164002353" style="zoom:50%;" />              <img src="原理.assets/image-20240330164027742.png" alt="image-20240330164027742" style="zoom:55%;" />

# 67 同步loader

https://www.bilibili.com/video/BV14T4y1z7sw/?p=67&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e

<img src="原理.assets/image-20240330165546747.png" alt="image-20240330165546747" style="zoom: 80%;" />

# 68 异步loader

https://www.bilibili.com/video/BV14T4y1z7sw/?p=68&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e

![image-20240330170519311](原理.assets/image-20240330170519311.png)

# 69 row loader

<img src="原理.assets/image-20240330170739778.png" alt="image-20240330170739778" style="zoom:80%;" />

# 70 picth loader

<img src="原理.assets/image-20240330170904664.png" alt="image-20240330170904664" style="zoom:50%;" />

<img src="原理.assets/image-20240331140421101.png" alt="image-20240331140421101" style="zoom:80%;" />

# [71 loader API](https://www.bilibili.com/video/BV14T4y1z7sw/?p=71&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

==这些loader api是装了webpack就有吗？还是装webpack-cli才有，还是怎么的？？？==

![image-20240330201821605](原理.assets/image-20240330201821605.png)

# [72 自定义clean-log-loader](https://www.bilibili.com/video/BV14T4y1z7sw/?p=72&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

<img src="原理.assets/image-20240330202424194.png" alt="image-20240330202424194" style="zoom: 75%;" />

https://webpack.docschina.org/api/cli/

https://webpack.docschina.org/guides/installation/

> ###### 警告
>
> 如果你想使用 `npx` 来运行 webpack，请确保你已经安装了 `webpack-cli`

```
npx webpack
```

# [73  自定义banner-loader](https://www.bilibili.com/video/BV14T4y1z7sw/?p=73&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

<img src="原理.assets/image-20240330215338371.png" alt="image-20240330215338371" style="zoom: 67%;" />            <img src="原理.assets/image-20240330215417530.png" alt="image-20240330215417530" style="zoom:67%;" />

<img src="原理.assets/image-20240330215528486.png" alt="image-20240330215528486" style="zoom:67%;" />



# 74 自定义babel-loader

# [75 自定义file-loader](https://www.bilibili.com/video/BV14T4y1z7sw/?p=75&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

- 根据文件内容生成一个hash值的文件名称
- 然后把文件输出到dist目录
- module.exports

<img src="原理.assets/image-20240331102200931.png" alt="image-20240331102200931" style="zoom:50%;" />

```
npm i loader-utils -D
npm i css-loader style-loader -D
```

<img src="原理.assets/image-20240331104958878.png" alt="image-20240331104958878" style="zoom:80%;" />

## 75.1 webpack从v4升级到v5

- 如果你定义了 `rules`，以使用 `raw-loader`，`url-loader` 或 `file-loader` 来加载资源，请使用 [资源模块](https://webpack.docschina.org/guides/asset-modules/) 替代，因为它们可能在不久的将来被淘汰。

# [76 自定义style-loader](https://www.bilibili.com/video/BV14T4y1z7sw/?p=76&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

- 通过动态创建style标签， 将处理好的样式，放到style标签内生效
- <img src="原理.assets/image-20240331121457528.png" alt="image-20240331121457528" style="zoom:80%;" />

# [78 Plugin介绍](https://www.bilibili.com/video/BV14T4y1z7sw/?p=78&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

插件接口允许用户直接介入编译过程。 插件可以在不同时期运行的生命周期挂钩上注册回调函数。 在单个编译流程中，当每个钩子都被执行后，插件将拥有 当前编译流程的完整访问权限

https://webpack.docschina.org/api/plugins/

## Plugin的作用

- 通过plugin，我们可以扩展webpack，加入一些自定义的构建行为，使webpack可以执行更广泛的任务，拥有更强的构建能力

## Plugin的工作原理

![image-20240331143925871](原理.assets/image-20240331143925871.png)

## Webpack内部的钩子

### 什么是钩子

![image-20240331144032593](原理.assets/image-20240331144032593.png)

### Tapable

![image-20240331144127339](原理.assets/image-20240331144127339.png)

## Plugin构建对象

<img src="原理.assets/image-20240331143410099.png" alt="image-20240331143410099" style="zoom: 67%;" />

## 生命周期简图

<img src="原理.assets/image-20240331143655928.png" alt="image-20240331143655928" style="zoom:67%;" />

# [79 第一个Plugin](https://www.bilibili.com/video/BV14T4y1z7sw/?p=79&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

- 所有插件都是一个构造函数，因为将来要new plugin
- ![image-20240331144551978](原理.assets/image-20240331144551978.png)

# [80 注册hooks](https://www.bilibili.com/video/BV14T4y1z7sw/?p=80&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

<img src="原理.assets/image-20240401080404130.png" alt="image-20240401080404130" style="zoom:67%;" />

<img src="原理.assets/image-20240401080447917.png" alt="image-20240401080447917" style="zoom:67%;" />

# [81 通过node调试查看compiler和compilation对象](https://www.bilibili.com/video/BV14T4y1z7sw?p=81&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

package.json

```json
"scripts": {
    "debug": "node --inspect-brk ./node_modules/webpack-cli/bin/cli.js"
}
```

# [82 自定义BannerWebpackPlugin](https://www.bilibili.com/video/BV14T4y1z7sw/?p=82&spm_id_from=pageDriver&vd_source=a7089a0e007e4167b4a61ef53acc6f7e)

![image-20240401121444789](原理.assets/image-20240401121444789.png)

将tapAsync改成tap

![image-20240401122300801](原理.assets/image-20240401122300801.png)

![image-20240401122335460](原理.assets/image-20240401122335460.png)









































